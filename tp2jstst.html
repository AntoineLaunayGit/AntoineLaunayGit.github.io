<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <title>Mon site web</title>
	<link rel="stylesheet" href="indexstyle.css">
	<link rel="SHORTCUT ICON" href="chatanimation.ico">	<!-- Une icone d'onglet modifié -->
	<h1><a href="index.html">Mon site web</a></h1>
<img src="chatanimation.ico" alt="chatanimation" class ="chatanimation"/>	<!-- l'animation -->
<nav class="menu">	<!-- Le menu avec les # permettant de se déplacer à un endroit précis d'une page du site où se situe l'id correspondant -->
		<section class="categorie">
			<h3><a href="index.html">Accueil</a></h3>
		</section>
		<section class="categorie">
			<h3><a href="mespages.html">Mes pages</a></h3>
			<ul>
				<li><a href="tp1.html">compte à rebour</a></li>
				<li><a href="tp2.html">carré rouge</a></li>
				<li><a href="tp3.html">tp3</a></li>
				<li><a href="tp4.html">3 carrés rouges</a></li>
				<li><a href="tp5.html">10 carrés rouges</a></li>
				<li><a href="tp2js.html">animation sprite</a></li>
				<li><a href="tp2jstst.html">animation double sprite</a></li>
			</ul>
		</section>
		<section class="categorie">
			<h3><a href="cv.html">Mon CV</a></h3>
		</section>
</nav>

 </head>

<body>
<canvas id="CanvasAnimSprite" width="1920" height="1080">
 <script>

  CanvasTpAnimSprite = document.getElementById("CanvasAnimSprite");
  var ctx = CanvasTpAnimSprite.getContext('2d');
  ctx.canvas.width  = window.innerWidth;
  ctx.canvas.height = window.innerHeight;

  function drawGame(i, j, x, y, z, q){
      console.log("y = "+y)
      console.log("innerWidth = "+window.innerWidth)
      console.log("innerHeight = "+window.innerHeight)
      CanvasTpAnimSprite = document.getElementById("CanvasAnimSprite");
      var ctx = CanvasTpAnimSprite.getContext('2d');

      var img = new Image();
      img.addEventListener('load', function() {
          ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
          ctx.drawImage(img, 128*i, 128*j, 128,128,y,x,128,128 );
      }, false);
      img.src="spritehero.png";
	  
	  var imgbis = new Image();
      imgbis.addEventListener('load', function() {
          ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
          ctx.drawImage(imgbis, 128*i, 128*j, 128,128,z,q,128,128 );
      }, false);
      imgbis.src="spriteantihero.png";

  }
  var i = 0 ;
  var j = 0 ;
  var x = 100 ; 
  var y = 100 ;
  var z = 300 ; 
  var q = 300 ;

  var mainloop = function() {

    window.addEventListener("keydown", function (event) {
      if (event.defaultPrevented) {
        return; // Should do nothing if the key event was already consumed.
      }
      i++;
      if(i>3) i = 0;

      switch (event.key) {
        case "ArrowDown":
          if(x+10 < window.innerHeight-100) x = x+10;
          j = 2
          break;
        case "ArrowUp":
        if(x-10 > 0) x = x-10;
          j = 3
          break;
        case "ArrowLeft":
          if(y-10>0) y = y-10;
          j = 0
          break;
        case "ArrowRight":
          if(y +10 <window.innerWidth-100) y = y+10;
          j = 1
          break;
		case "s":
          if(q+10 < window.innerHeight-100) q = q+10;
          j = 2
          break;
        case "z":
        if(q-10 > 0) q = q-10;
          j = 3
          break;
        case "q":
          if(z-10>0) z = z-10;
          j = 0
          break;
        case "d":
          if(z +10 <window.innerWidth-100) z = z+10;
          j = 1
          break;
        default:
          //j = 0;
          return; // Quit when this doesn't handle the key event.
      }
      drawGame(i, j, x, y, z, q);

      // Consume the event for suppressing "double action".
      event.preventDefault();
     }, true);
    };
    mainloop();

</script>

 </body>
</html>